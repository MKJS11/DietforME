7<!--pages/cart/cart.wxml-->
<view class="container" style="position: relative; left: 0rpx; top: 91rpx">
  <!-- è¿”å›æŒ‰é’® -->
  <view class="back-button action-btn" bindtap="goBack" style="position: fixed; left: 20rpx; top: 110rpx">
    è¿”å›
  </view>
  <!-- ç©ºè´­ç‰©è½¦çŠ¶æ€ -->
  <view class="empty-cart" wx:if="{{emptyCart}}">
    <view class="empty-cart-icon">ğŸ›’</view>
    <text class="empty-cart-text">è´­ç‰©è½¦æ˜¯ç©ºçš„</text>
    <text class="empty-cart-tip">æ‚¨å¯ä»¥åœ¨èœè°±è¯¦æƒ…é¡µæ·»åŠ é£Ÿæåˆ°è´­ç‰©è½¦</text>
    <view class="empty-cart-doodles">
      <text class="doodle doodle-1">ğŸ¥—</text>
      <text class="doodle doodle-2">ğŸŒ¿</text>
      <text class="doodle doodle-3">ğŸš</text>
      <text class="doodle doodle-4">ğŸ²</text>
    </view>
  </view>
  
  <!-- è´­ç‰©è½¦å†…å®¹ -->
  <block wx:else>
    <!-- å¤´éƒ¨æ“ä½œåŒº -->
    <view class="header-container" style="width: 726rpx; display: block; box-sizing: content-box; left: NaNrpx; top: 0rpx">
      <view class="header" style="position: relative; left: 14rpx; top: 35rpx; width: 698rpx; display: flex; box-sizing: border-box; height: 119rpx">
        <view class="title-container">
          <text class="title-icon" style="position: relative; left: 157rpx; top: 0rpx">ğŸŒ±</text>
          <text class="title" style="position: relative; left: 189rpx; top: 2rpx">è´­ç‰©è½¦</text>
        </view>
        <view class="actions">
          <view class="action-btn edit" bindtap="toggleEditMode">
            {{editMode ? 'å®Œæˆ' : 'ç¼–è¾‘'}}
          </view>
          <view class="action-btn clear" bindtap="clearCart">
            æ¸…ç©º
          </view>
        </view>
      </view>
      <view class="subtitle" style="position: relative; left: 0rpx; top: 46rpx; height: 51rpx; display: block; box-sizing: border-box">èœå“æ¥æºæœ‰æœºé£Ÿå“ä¾›åº”å•†</view>
    </view>
    
    <!-- é£Ÿæåˆ—è¡¨ -->
    <scroll-view scroll-y="true" class="cart-list" style="height: 1457rpx; display: block; box-sizing: border-box">
      <view class="doodle-decorations">
        <text class="cart-doodle cart-doodle-1">ğŸŒ±</text>
        <text class="cart-doodle cart-doodle-2">ğŸ¥•</text>
        <text class="cart-doodle cart-doodle-3">ğŸ¥”</text>
      </view>
      <view wx:for="{{cartItems}}" wx:key="uniqueId" class="cart-item-container">
        <view class="cart-item {{item.checked ? 'checked' : ''}}">
          <!-- ç¼–è¾‘æ¨¡å¼æ˜¾ç¤ºé€‰æ‹©æ¡† -->
          <view wx:if="{{editMode}}" class="select-box" catchtap="toggleItemSelect" data-index="{{index}}">
            <view class="select-inner {{item.selected ? 'selected' : ''}}"></view>
          </view>
          
          <!-- éç¼–è¾‘æ¨¡å¼æ˜¾ç¤ºå‹¾é€‰æ¡† -->
          <view wx:else class="check-box" catchtap="toggleItemCheck" data-index="{{index}}">
            <text class="check-icon">{{item.checked ? 'âœ“' : ''}}</text>
          </view>
          
          <!-- é£Ÿæä¿¡æ¯ -->
          <view class="item-info">
            <view class="item-name">{{item.name}}</view>
            <view class="item-amount">{{item.amount}}{{item.unit}}</view>
            <view wx:if="{{item.recipe}}" class="item-recipe" catchtap="goToRecipe" data-recipe="{{item.recipe}}">
              æ¥è‡ªï¼š{{item.recipe}}
            </view>
          </view>
        </view>
      </view>
    </scroll-view>
    
    <!-- åº•éƒ¨å·¥å…·æ  - ç¼–è¾‘æ¨¡å¼ -->
    <view class="footer edit-footer" wx:if="{{editMode}}">
      <view class="select-all" bindtap="toggleSelectAll">
        <view class="select-box">
          <view class="select-inner {{allSelected ? 'selected' : ''}}"></view>
        </view>
        <text>å…¨é€‰</text>
      </view>
      <view class="selected-info">
        å·²é€‰: {{selectedCount}}
      </view>
      <view class="delete-btn" bindtap="deleteSelected">
        åˆ é™¤
      </view>
    </view>
    
    <!-- åº•éƒ¨å·¥å…·æ  - æ­£å¸¸æ¨¡å¼ -->
    <view class="footer checkout-footer" wx:else>
      <view class="checkout-select-all" bindtap="toggleAllChecked">
        <view class="select-box">
          <view class="select-inner {{allChecked ? 'selected' : ''}}"></view>
        </view>
        <text>å…¨é€‰</text>
      </view>
      <view class="total-info">
        <view>
          <text class="total-label">æ€»è®¡ï¼š</text>
          <text class="total-count">{{cartItems.length}}ä¸ªé£Ÿæ</text>
        </view>
        <view class="total-checked">
          å·²é€‰è´­ï¼š{{checkedCount}}ä¸ª
        </view>
      </view>
      <view class="checkout-btn" bindtap="checkout">
        <text>ç»“ç®—</text>
      </view>
    </view>
  </block>
</view> 